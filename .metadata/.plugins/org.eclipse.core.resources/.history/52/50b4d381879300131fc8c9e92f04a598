//data gets our remote data so we can put it in our table view
//asdi1402 week 2
//by Travis A. Mix
//on Febuary 10, 2014
//using reddit api

var jsonData;
var tableData = [];
var jsonList = [];
var row;

var remoteResponse = function() {
    Ti.API.info(this.responseText);
    jsonData = JSON.parse(this.responseText);
    Ti.API.info("Author: " + jsonData.data.children[0].data.author);
};

for(var i = 0; i < 10; i++){
	jsonList[i] = JSON.stringify(jsonData[i]);
}

var remoteError = function(e) {
    Ti.API.debug("Status: " + this.status);
    Ti.API.debug("Text: " + this.responseText);
    Ti.API.debug("Error: " + e.error);
    alert("There's a problem pulling remote data");
};

var xhr = Ti.Network.createHTTPClient({
    onload : remoteResponse,
    onerror : remoteError,
    timeout : 5000
});

//create our table view
var table = Ti.UI.createTableView({
	
});

for(var i = 0; i < 10; i++){
	var titleText = toString(jsonData.data.children[i].data.author);
	
	row = Ti.UI.createTableViewRow({
		height : "auto",
		text : titleText
	});
	tableData.push(row);
}



xhr.open("GET", "http://api.reddit.com");
xhr.send();

table.setData(tableData);
